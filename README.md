# 基于DOC窗口的小说阅读器

## 介绍

这是一款DOC窗口程序，用于后台阅读小说使用。希望可以给程序员工作之余，一点小小的慰藉，CMD运行，完全看不出这是一个娱乐程序。

## 系统架构

JaCob 1.18

MyBatis

MySQL

简要说明：

1.JaCob一定要注意版本号，因为里面很多句柄是对应的，不然无法调用（吐槽：DLL文件不一定要放在system32文件夹下，只要是系统注册的路径即可）。

2.MyBatis是第二版新增的，原本使用的数据是一本2M多的小说，那时候当下使用还可以，启动时预加载一部分进内存还十分方便，但后续出现10M的小说等情况，引入MyBatis进行管理。

3.MySQL作为数据落地的数据库，选择它主要是它Free，还可以修改内核引擎，没有那么累赘的系统服务增强（说的就是你，Oracle！）……总之吹爆MySQL。

## 开发思路

整个项目开发分成了四个阶段：

V1：那时候只是想做个本地的小说阅读器，本来第一版使用的Python，后来由于各种各样的原因（我才不会说是因为绕来绕去，在做判断时候做懵了）。让我一个老Javaer，拾起了自己的Java来做切割，这个阶段图书切片仍在内存，通过预加载实现更为快捷的阅读。

V2：此时想着，是不是功能太少了，上述在弄的时候，发现第一个版本只能切割以后进行一次性阅读，预加载也是这部分的，然后开始想着做功能切分，终于此时有了界面，起初的三个功能：只读一次退出系统；重复选择章节阅读（你觉得这段很无聊，可以跳章节听了）；指定起始位置，一直读下去。尽管这时候已经实现大概的功能，但是我觉得还是不够方便。

V3：在这个基础上，为了更能确定自己操纵的书籍以及系统内已存在的书籍等等，开始使用SQL知识去重，做书目，提取setName方法，随时随地（噗，好吧，我的承认，需要在阅读间隔随时随地）修改书籍（这本书太无聊了，给我起开！），但是随着而来很多问题，切割时原先的预加载遇到单例模式的资源回收问题等等，开始进行初步修改。

V4：到了现在这个版本，基本所有的功能都已经完善了，就是去重方法还是慢，于是考虑索引的问题。这里你会发现我的SQL并没有主键，这是因为我切割书籍部分在保存时，id是重复的，除非多余写个resultMap，不然无法将id设置成number字段，而这里目前只有一个表，又不涉及联表同名参数问题。于是考虑到索引重复值太多，切分表单，使得书目功能提取出来，随之而来的数据同步问题，而我又不是传统的spring项目（吐槽：本来就是个DOC窗口方便运行的项目，部署成web，还给个页面放背景音乐么？），于是开始复杂的trycatch，至此，快捷、方便、易运行的小说阅读器完成，让你工作之余尽享小说的愉悦！

## 待完善的功能

其实这个Jacob我也是初次使用，在参考几篇博文以后，匆匆写的，很多必要功能还是有待思考实现（比如：尿遁，小说在阅读，如果不是有打印章节，都不知道自己该听哪儿了，需要有个暂停功能）；

如何更优雅的对异常进行处理，这里其实只是对异常进行了简单抛出，打印部分只是为了更方便了解出问题的大概原因及地方；

还有就是由于章节实际为一张表，name字段的重复问题，如果可以建立索引能够更为快速查询，不过现在已经不慢了，毕竟谁闲着没事数据库还存几十上百本书听，也听不过来；

其实还有个调音色的功能，但是DOC操作不太方便，而且用户不太懂这些参数的意义，但总归有趣的设定，后续可以添加。

## 使用

启动：

进入rebuild，然后进入jar包目录：

```
java -jar your_jar_name.jar
```

功能方法：

第一次进入你会发现需要你输入书名，这是因为，这里绝大部分功能都基于name和number字段实现，后续number都是手输，name为了方便，我相信没人那么多事，同一时间段患者听吧？然后全局固定书名方便：后续输入章节达到效果。

```
0: 请确定想要的书籍名；
1: 只读一次就结束；
2: 重复读；
3: 自起始位置开始读取；
4: 为本系统添加新的书籍（源文件路径为：F:\电子书\网络小说\）；
5: 查询系统已有书目；
6: 移除您想移除的书目；
```

如上所示：

0——确认你当前操作的书籍名（注意：是当前的书籍，而不是想要的，一定要是存在的书名！）；

5——针对0，后续推出查询书目功能（所以一开始尽量输入对的，不清楚时，可以乱输入，后续0改）；

1——读一章就结束（这是为贤者准备，具备良好的自我管理能力，佩服！）；

2——其实应该叫重复选择读（尽你所想，想读哪里输哪里）；

3——起始位置开始读，方便懒人一口气听下去，打印记录，方便下次继续听；

4——后来觉得不应该做成两个应用，就聚合到一起了；

6——听完的辣鸡小说，你可以走了，当然经典小说可以收藏起来，反复听。